<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Worker Dashboard - Konnect</title>
    <link rel="stylesheet" href="workerdashboard.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: #f5f5f5;
        }

        .worker-container {
            text-align: center;
            padding: 40px;
            background: #fff;
            width: 70%;
            margin: 50px auto;
            border-radius: 12px;
            box-shadow: 0px 4px 10px rgba(0,0,0,0.1);
            position: relative;
        }

        .worker-buttons {
            margin-top: 40px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
        }

        .worker-buttons button {
            padding: 12px 20px;
            font-size: 16px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            background: #007bff;
            color: white;
            transition: 0.3s;
        }

        .worker-buttons button:hover {
            background: #0056b3;
        }

        /* Profile Icon Button */
        .profile-icon {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 55px;
            height: 55px;
            border-radius: 50%;
            border: 3px solid #fff; /* outer white layer */
            box-shadow: 0px 2px 6px rgba(0,0,0,0.3);
            cursor: pointer;
            overflow: hidden;
            background: #ddd; /* fallback */
        }

        .profile-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .profile-icon:hover {
            transform: scale(1.05);
            transition: 0.3s;
        }
    </style>
</head>
<body>
    <div class="worker-container">
        <!-- Profile icon that links to edit profile -->
        <a href="edit profile.html" class="profile-icon" title="Edit Profile">
            <img src="https://www.w3schools.com/howto/img_avatar.png" alt="Profile">
        </a>

       <h2>
  Welcome, <span id="workerName">Worker</span>
</h2>
        <p>Here‚Äôs your workspace:</p>
        <p>
  Location: <span id="workerLocation">Unknown</span>
</p>

        <div class="worker-buttons">
            <a href="wrkrreqsee.html"><button>üìÖ My request</button></a>
            <a href="myschedule.html"><button>üìÖ My Schedule</button></a>
            <button>‚≠ê My Ratings</button>
            <a href="mygigs.html"><button>‚öô My Gigs</button></a>
            <a href="setjob.html"><button>üõ† Set My Job</button></a>
        </div>
    </div>
</body>
<script type="module">
  // Import Firebase
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
  import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js";

  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyCzK5umphNqLVacI8IpqLuA_1mpi0fUofU",
    authDomain: "konnect-7d7a3.firebaseapp.com",
    projectId: "konnect-7d7a3",
    storageBucket: "konnect-7d7a3.firebasestorage.app",
    messagingSenderId: "179662401817",
    appId: "1:179662401817:web:f3faf467f5a54232eb5588"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const auth = getAuth(app);

  // When user logs in
  onAuthStateChanged(auth, async (user) => {
    if (user) {
      const uid = user.uid;

      // Get worker document from Firestore
      const workerRef = doc(db, "workers", uid);
      const workerSnap = await getDoc(workerRef);

      if (workerSnap.exists()) {
        const data = workerSnap.data();
        
        // Update dashboard with name + location
        document.getElementById("workerName").textContent = data.name || "Worker";
        document.getElementById("workerLocation").textContent = data.location || "Not set";
      } else {
        console.log("No worker data found for this user!");
      }
    }
  });
</script>

</html>
